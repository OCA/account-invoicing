-
  In order to test that the invoices with an amount still behave normally, I create on invoice
-
  !record {model: account.invoice, id: account_invoice_state}:
    account_id: account.a_recv
    company_id: base.main_company
    currency_id: base.EUR
    invoice_line:
      - account_id: account.a_sale
        name: '[PCSC234] PC Assemble SC234'
        price_unit: 450.0
        quantity: 1.0
        product_id: product.product_product_3
        uos_id: product.product_uom_unit
    journal_id: account.bank_journal
    partner_id: base.res_partner_12
    reference_type: none
-
  I check that Initially customer invoice state is "Draft"
-
  !assert {model: account.invoice, id: account_invoice_state}:
    - state == 'draft'
-
  I change the state of the invoice by executing the "invoice_to_valid" workflow
-
  !workflow {model: account.invoice, action: invoice_to_valid, ref: account_invoice_state}
-
  I check that customer invoice state is now "to_valid"
-
  !assert {model: account.invoice, id: account_invoice_state}:
    - state == 'to_valid'
-
  I change the state of invoice by executing the "invoice_to_send" workflow
-
  !workflow {model: account.invoice, action: invoice_to_send, ref: account_invoice_state}
-
  I check that customer invoice state is now "to_send"
-
  !assert {model: account.invoice, id: account_invoice_state}:
    - state == 'to_send'
-
  I change the state of invoice by clicking validate button
-
  !workflow {model: account.invoice, action: invoice_open, ref: account_invoice_state}
-
  I check that customer invoice state is "Open"
-
  !assert {model: account.invoice, id: account_invoice_state}:
    - state == 'open'

